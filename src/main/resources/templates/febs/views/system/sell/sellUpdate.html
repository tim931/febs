                     <div class="layui-fluid" id="sell-update">
                    <form class="layui-form layui-table-form" lay-filter="sell-update-form">
                        <div class="layui-row">
                            <div class="layui-col-md10">
                                <div class="layui-form-item">

                                    <div class="layui-form-item febs-hide">
                                        <div class="layui-input-block">
                                            <input type="text" name="sellId" data-th-value="${sell.sellId}" >
                                        </div>
                                    </div>

                                    <div class="layui-form-item febs-hide">
                                        <div class="layui-input-block">
                                            <input type="text" name="createUserId" data-th-value="${sell.createUserId}" >
                                        </div>
                                    </div>

                                    <div class="layui-form-item febs-hide">
                                        <div class="layui-input-block">
                                            <input type="text" name="createTime" data-th-value="${sell.createTime}" >
                                        </div>
                                    </div>

                                    <div class="layui-form-item">
                                        <label class="layui-form-label febs-form-item-require">商品名：</label>
                                        <div class="layui-input-block">
                                            <select name="commodityId" id="sell-name" readonly lay-verify="required" >
                                            </select>
                                        </div>
                                    </div>


                                    <div class="layui-form-item">
                                        <label class="layui-form-label febs-form-item-require">销售时间：</label>
                                        <div class="layui-input-block">
                                            <input type="tel" name="sellDataSj" id="sellTimeS" class="layui-input">
                                        </div>
                                    </div>

                                    <div class="layui-form-item">
                                        <label class="layui-form-label febs-form-item-require">单价：</label>
                                        <div class="layui-input-block">
                                            <input type="tel" name="sellUniValence" id="sellUniValenceS" lay-verify="required|number" required autocomplete="off"
                                                   class="layui-input">
                                        </div>
                                    </div>

                                    <div class="layui-form-item">
                                        <label class="layui-form-label febs-form-item-require">数量：</label>
                                        <div class="layui-input-block">
                                            <input type="text" name="sellCount" id="sellCountS" lay-verify="required|title" maxlength="50" autocomplete="off"
                                                   class="layui-input">
                                        </div>
                                    </div>

                                    <div class="layui-form-item">
                                        <label class="layui-form-label  febs-form-item-require">总金额：</label>
                                        <div class="layui-input-block">
                                            <input type="text" name="sellTotalMoney" id="sellTotalMoneyS" lay-verify="required"  autocomplete="off"
                                                   class="layui-input" readonly> <!--readonly 只读不可编辑的-->
                                        </div>
                                    </div>

                                    <div class="layui-form-item " >
                                        <label class="layui-form-label febs-form-item-require">客户：</label>
                                        <div class="layui-input-block">
                                            <select name="clientId" id="clientName-update" readonly lay-verify="required"  >
                                            </select>
                                        </div>
                                    </div>

                                    <div class="layui-form-item">
                                        <label class="layui-form-label febs-form-item-require">销售人：</label>
                                        <div class="layui-input-block">
                                            <input type="text" name="sellPerson" id="sellPerson" lay-verify="required" maxlength="50" autocomplete="off"
                                                   class="layui-input">
                                        </div>
                                    </div>

                                    <div class="layui-form-item febs-hide">
                                        <button class="layui-btn" lay-submit="" lay-filter="sell-update-form-submit" id="submit"></button>
                                        <button type="reset" class="layui-btn" id="reset"></button>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </form>
                    </div>

                     <script data-th-inline="javascript">
                         layui.use(['febs', 'form', 'formSelects', 'laydate','validate', 'treeSelect'], function () {
                             var $ = layui.$,
                                 febs = layui.febs,
                                 laydate = layui.laydate,
                                 layer = layui.layer,
                                 form = layui.form,
                                 sell = [[${sell}]],
                                 validate = layui.validate;

                             /** 点击文本框显示时间选择*/
                             laydate.render({
                                 elem: '#sellTimeS'//指定的元素
                             });

                             // 自动计算总金额
                             layui.$('#sellUniValenceS').on('change', function(){
                                 var data = form.val('sell-update-form');
                                 var sellUniValenceS=data.sellUniValence;
                                 var sellCount=data.sellCount;

                                 setSellTotalMoney(sellUniValenceS,sellCount);
                             });

                             layui.$('#sellCountS').on('change', function(){
                                 var data = form.val('sell-update-form');
                                 var sellUniValence=data.sellUniValence;
                                 var sellCount=data.sellCount;
                                 setSellTotalMoney(sellUniValence,sellCount);
                             });

                             function setSellTotalMoney(sellCount, sellUniValence) {
                                 var sellTotalMoney = 0;
                                 if (sellCount != "" && sellUniValence != "") {
                                     sellTotalMoney = sellCount * sellUniValence;
                                 }
                                 form.val("sell-update-form", {
                                     "sellTotalMoney": sellTotalMoney});
                             }


                             var resultData1;
                             var html = '<option value="">请选择</option>'; //全局变量
                             $.ajax({
                                 url: ctx + 'sell/select/listClient',
                                 type: "get",
                                 dataType : "json",
                                 contentType : "application/json",
                                 async: false,//这得注意是同步
                                 success: function (result) {
                                     resultData1 = result;
                                     for(var x in resultData1){
                                         html += '<option value = "' + resultData1[x].clientId+ '">' + resultData1[x].clientName + '</option>'
                                     }
                                     $("#clientName-update").html(html);
                                 }
                             });
                             form.render('select');//需要渲染一下

                             var resultData;
                             var html = '<option value="">请选择</option>'; //全局变量
                             $.ajax({
                                 url: ctx + 'sell/select/list',
                                 type: "get",
                                 dataType : "json",
                                 contentType : "application/json",
                                 async: false,//这得注意是同步
                                 success: function (result) {
                                     resultData = result;
                                     for(var x in resultData){
                                         html += '<option value = "' + resultData[x].commodityId + '">' + resultData[x].commodityName + '</option>'
                                     }
                                     $("#sell-name").html(html);
                                 }
                             });
                             form.render('select');//需要渲染一下

                             /*是表单验证的关键字*/
                             form.verify(validate);
                             form.render();
                             initClientValue();
                             function initClientValue() {
                                 /* 根据ID查找出来的对象数据，渲染到文本框*/
                                 form.val("sell-update-form", {
                                     "commodityId": sell.commodityId,
                                     "createName": sell.createName,
                                     "sellUniValence": sell.sellUniValence,
                                     "sellCount": sell.sellCount,
                                     "sellTotalMoney": sell.sellTotalMoney,
                                     "clientId": sell.clientId,
                                     "sellDataSj": sell.sellData,
                                     "sellPerson": sell.sellPerson
                                 });
                             }


                             form.on('submit(sell-update-form-submit)', function (data) {
                                 if (febs.nativeEqual(data.field, sell)) {
                                     febs.alert.warn('数据未作任何修改！');
                                     return false;
                                 }
                                 febs.post(ctx + 'sell/update', data.field, function () {
                                     layer.closeAll();
                                     febs.alert.success(sell.commodityName + ' 销售记录修改成功');
                                     $('#febs-sell').find('#query').click();
                                 });
                                 return false;
                             });
                         });
                     </script>